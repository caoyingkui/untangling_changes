HASH,numPartitions,bug references,message
b87fee1b90fc7a4ff567235e2fc1387d035bbf31,2,"JRUBY-154, JRUBY-158","Fixes JRUBY-154, JRUBY-158 and warns when arguments to blocks differ"
a8583bc4b548ea3f09cf86cc0ce0b77670255f40,2,JRUBY-233,"Fix for JRUBY-233, and also fixes the testSocket.rb-test so we don't get those pesky intermittent test failures from it."
c93e9184ca8e6452719372a5c036cf29bc8ff4c6,3,JRUBY-607,"Fix for JRUBY-607, JRUBY-151 and JRUBY-57, by Bill Dortch"
e45d042829fd6b14368cfa717271bca5a2c7eefe,3,"JRUBY-451, JRUBY-591","JRUBY-451 and JRUBY-591 fixes, plus tests based on the cases given."
bbaef5f98567b93db0210b599d2c698b3293fae1,,,"Miguel's fixes for JRUBY-532, allows test_objectspace to run 100%."
2af7887e1cca6351faebc3c1b714a412c8b18f34,2,"JRUBY-1080, JRUBY-1247",Fix JRUBY-1080 and JRUBY-1247 on trunk
3a84606d084fcabbe6a70f43e44bf411fbbfb8aa,2,"JRUBY-1231, JRUBY-1372","JRUBY-1231, JRUBY-1372: fixes for File.directory? and Regexp.quotemerged from branch"
5d43a13fe3fcc127f0358ef6eed3a4afcca45671,2,JRUBY-1388,"Fix for JRUBY-1388, plus an additional fix where it wasn't scoping constants in the right module."
83f8bbdb95d84a9459ae93d2f5d101fd7156ca46,,,Reverting JRUBY-1482 commit; other stuff snuck in.
9d2f1384b21ce77b19d4a124054ed0027e5e5363,2,JRUB-1658,"Fix the Float coercion errors detailed in JRUBY-1658 and other places. Based on patch by Vladimir, but expanded to more places - also adds some tests for it."
9af5fab814bf48606a3a1ef780a148f9a79d7d53,,,"Fix for JRUBY-1807, clean up 14 out of 19 rubinius Time specs. Path by Vladimir."
98b77c5e346c42c69c6c08d228b0d3aeb8b596e9,2,JRUBY-1765,"Fix for JRUBY-1765, make scanner handle hashes in tag uris, also, make creation of dates handle negative years."
3a59dd7e8203e6a0b4d488ee634c8fdf3e74b4ab,,,"Fixes for JRUBY-2156 and JRUBY-2154, make sure that Readline is actually using the same streams as the rest of that Ruby session, meaning it can't really be singleton anymore"
29e83ce9715cc35b1ed1b7272776648ec86122c7,,,Reverting fix from Ola for JRUBY-2156 and JRUBY-2154 to find a solution that doesn't break windows readline.
7de6594072a7c0ef3377c9520d0a3f65d32173e0,,,A bit more cleanup for ProcMethod and define_method-related code like Proc#call. JRUBY-1387
02b11294262202ac1f5a63a8984fe693927acb94,,,Partial fix for JRUBY-2667: Plenty of new StringScanner failures for JRuby.* This fixes 7 out of 10 rubyspec failures for StringScanner.
8014dd53c62c6a1f316a5d12ab962a6eca9200bf,,,- JRUBY-2742: Major code duplication in BAT files- Additional fix for JRUBY-2720: 3rd party library can't get class loader
feb5cf7cd62a7a31b2623bbe21bc5515b2e978cb,,,Add an EventHook test from JRUBY-2962: Patch containing regression test for line number argument for EventHook
caef981504c985afe2a9fec76b8499990e877686,2,"JRUBY-3142, JRUBY3660",Fix for JRUBY-3142 and JRUBY-3660: Dir.pwd correctly displays dirs with unicode characters in themThanks to Aurelian Oancea for the simple patch!
3518b844ef68f39f9c2d2383095920a70ed2125d,2,"JRUBY-3717, JRUBY-3715",Fixes for JRUBY-3717 and JRUBY-3715
8935770f55c0ce5a4cf1136b549c77d032b83a26,,,"JRUBY-3705, JRUBY-3150: Fix load path spec under $SAFE by handling RUBYOPT"
9fa8a3c8e5313aa13645c7a48afe0b7e31d36f7b,,,JRUBY-4336: IO.read_nonblock should raise Errno::EAGAIN if there is no immediate dataThis also fixes new rubyspec failure.
882813c8bf6fa5e88f8ca317ebf3b40699c2c5de,2,"JRUBY-4364, JRUBY-4365","JRUBY-4364, JRUBY-4365: unary operations should execute operations and not optimize in parser like 1.8 did"
f2ff19f3c4f83ecf2ade31cf6cb87cdfbccad80a,,,JRUBY-4400: Add livetribe-jsr223 jars to Eclipse .classpathlivetribe-jsr223 is need for building with JDK 1.5Signed-off-by: Vladimir Sizikov <vsizikov@gmail.com>
29d1b662c3fddb40e06f4bbb5fb80d796a919859,,,"Regression test for JRUBY-4387, JRUBY-4416.Test by David, with adjustments (closing the test file)."
be6f6c0e5b48da9eba1fa244d7a0a6d6c60dd652,2,JRUBY-4643,Fix for JRUBY-4643: it is correct that M::X does not look for X in ObjectAlso includes a BONUS fix for off-by-one backtrace lines in evals with line specified.
9b6332c837016b0b94dbbd0acfa87bcc688588bf,,,"Fix JRUBY-4772: BigDecimal.sqrt is broken.Scale is shifted wrong in the borrowed algorithm.Also add reference to the original algorithm, which is actually broken in this context."
8c55ee5201888bf58faab0c484171fee7a37b147,,,"Fix for JRUBY-463. Make Struct.new on an existing struct name produce a warning, but also a new struct."
f7fd42a4ed234e7ec538d58da2024183eee3d0f4,2,JRUBY-80,"JRUBY-80: Duplicate Module ancestors (by Miguel)This is a substantial change to module include logic (much closer to original MRI logic).  I have run this though gem installs, a simple set of Rails actions, Rubicon, and our tests and it seems to not cause runtime problems.  Plus it fixes included test in this patch."
cccee89bfaae3a3760338a826fd15b3ce92217d7,4,"JRUBY-38, JRUBY-40","JRUBY-38: ""FooBar"".slice!(6..2) throws inappropriate RangeErrorJRUBY-40:  String ljust/rjust 2 arg support missingJRUBY-42: README refers to an erroneous file; normalize punctuationJRUBY-43: Inaccurate Rubicon file reference; FormattingUpdated comment to reflect defect in Jira versus SF"
173179d78158ff41cbc9d65d8b787e15ba7d40f6,3,"JRUBY-3, JRUBY-46, JRUBY-23","Miguel power blockJRUBY-3: Bogus 'warning: (...) interpreted as grouped expression' warningJRUBY-46: RubyString.java not compiling using JDK 1.4JRUBY-23: Array.min,Array.max with block gives error: `min': yield called out of Block"
0b29066e3c994d94ef4e40aa93c6dc3d77a68b19,2,"JRUBY-59, JRUBY-63",JRUBY-63: 'A' <=> 3 fails (Miguel)JRUBY-59: Missing 1.8 Symbol functionality (Miguel)
7746809435ecc034b439cdd023e8a28795a1309f,2,"JRUBY-19, JRUBY-101",JRUBY-19: [intro] Time#at needs to account for floating point secondsJRUBY-101: Failures on MRI test/ruby/test_time.rb
85d076939f597eefa63ed7539e11d86cabeabc36,2,"JRUBY-99, JRUBY-103","JRUBY-103: Unbound Methods can not be bound to derived classes (enebo)JRUBY-99: UnboundMethod class created twice (Miguel)- Thread Service initializing mainContext, localContext twice- Extra autoload of what is now a standard core library in 1.8"
3366f27b861dcf3d286579ba6ef00f638e6794fc,2,"JRUBY-116, JRUBY-117",JRUBY-116: Kernel#Array shouldn't warn about default to_a-implementation.JRUBY-117: Kernel#to_a should be public.JRUBY-118: Object#remove_instance_variable should be private
1e53e5cb6de3e5b1d5f1b642c609c16902b5867e,2,JRUBY-167,JRUBY-168: New Java class include syntaxJRUBY-167: comparing java objects with nil
e0ceda72126d940759967b7bbb55a84a968044e8,3,"JRUBY-165, JRUBY-176",JRUBY-176: minirunit test_no_exception is brokenJRUBY-165: infinite recursion when calling method not implemented in java interfaceJRUBY-169: Interfaces should be instantiable
d645af1c42370aae4840042fffc1cc04acdc41f1,2,JRUBY-285,Fix for JRUBY-285 and fix for a YAML test regression
418c30d7568bd7f3d82ef1d3a011ee39d958b8f6,2,JRUBY-291,Fix for JRUBY-291. Also makes error message from convertToType more like MRI
fe628a940467ceda783730ea34173dec3d365fa4,2,"JRUBY-270, JRUBY-284","JRUBY-270, JRUBY-284: exception with nil or non-array backtrace causes various incorrect (non-MRI) behaviourRSpec goodness fixingSSLSocket is unused variable"
43527512ed5edac73606a65971bfe9f8a7c23c7b,,,JRUBY-271:  Fix 3 for RSpec: catch / throw not working as it should
a99c8643e2996a04338dcb2ea5ad169c29e5f798,2,JRUBY-290,"Fixed JRUBY-290, and also added support for lang parameter to regexps in EvaluationState"
d2a3e96a5caf8bc4e4894cc0cff288c732dcc835,2,JRUBY-293,Fix for JRUBY-293. Not really a YAML regression but better YAML functionality that showcased a bug in RubyTime#op_cmp. Also fixes a wayward Regexp in JvYAML.
510a41b06f3103200e881725915b7cc1a5a10b39,,,"Fix for JRUBY-295 and JRUBY-172. Zlib in Java, and Rubyzip working"
be97fd873dd310ba4324dc0c91d19b112ab3eebe,2,"JRUBY-283, JRUBY-172","Make invalid regexps blow up at definition time, JRUBY-283 and JRUBY-200"
56de464c1a2f6e0fe0d4b8af6983838d05221d0f,3,"JRUBY-309, JRUBY-310",JRUBY-304: Implement IconvThis only implements the class methods: iconv and convIt also does not appropriately handle all Exceptions (JRUBY-309)It also does not implement the instance methods (JRUBY-310)This does enough to saitsify Rails however and once 309 is fixed it should be double plus good.
b67c40a3f639fb4636e868d3813c423d48831e58,2,"JRUBY-317, JRUBY241",Fix for JRUBY-317 and JRUBY-241
c5efec819547c1904f24520251cba220ba8d4a25,2,"JRUBY-308, JRUBY-314","Fix for JRUBY-308 and JRUBY-314 by Anders Bengtsson,"
8d31263748c5d68a8c9468b1518474ad90da8276,2,JRUBY-315,Fix for JRUBY-315; Exceptions are initialized _very_ strange in MRI. Exceptions are also cloneable now
d38821551a58969cd2593b463d93df5f32bf3c14,3,"JRUBY-336, JRUBY-337","Fix for JRUBY-336 and JRUBY-337: add support for applets by catching (and ignoring) access violation exceptions, and adds applet and standalone consoles"
46799ab45bc25fd63f2e53c0b6c44e2586587637,,,Reverting two files with bogus changes that snuck in on the JRUBY-336 and JRUBY-337 changes.
c6e27a0e5e85576a7105c7c53fbb37a02a29a22b,3,"JRUBY-111, JRUBY-177, JRUBY-377","Fix for JRUBY-111, JRUBY-177 and JRUBY-377"
c020e7590a91dff92205546b4efb598482585345,,,"JRUBY-372: Nested Exceptions do not set $! correctlyJRUBY-373: When an exception is raised from a within a rescue node, the global exception ($!) does not remain set.Patch by Ryan Bell(Our use of recursion here makes this solution work, but if we make this stackless we will likely need to scope $! and stick it in TC [$! is really thread specific and not global, but that is another bug])"
cc7684b418179fb32878ac5f44c8c0f519b1b8bc,2,"JRUBY-407, JRUBY-387",JRUBY-407: with JRUBY-387:  Happy together again (missed AttrAssignNode code in AssignmentVisitor)
dbdef380904ba217548f08f1de84e01fb569c9e7,2,JRUBY-429,"Fix for JRUBY-429, and also make filenames more like MRI in backtraces."
f00dfc9fcfb4c7a9ffbe605bd4cbf08cd2e9cb60,,,"Committing changes for JRUBY-405. I've accomplished what I set out to do, which was moving all the yield logic into Block and other appropriate classes. Other block refactoring, including adding a block argument to the call pipline, will come in other JIRAs."
8434b1845cb42be241a75b0ea3cf1c46d72d615d,,,Fix for JRUBY-423. Fix so that exceptions will be handled correctly by the generated invocations. Also throw an exception if there is any problem with generating the method
6503e77d53e6c67900f3fbb63148f80358899509,2,,"Fix for JRUBY-417, redefining constants should warn, and also change a few unnecessary double settings of constants in the core init."
7a07d4bc724539548b2905088a89249a4b1e6c4e,3,JRUBY-189,"Fix for JRUBY-189, calling super in methods defined with define_method blows up. Also add two very small cleanups."
cec568bfaa3419cf3987707be752dd6d48d0c3f6,4,JRUBY-341,"Fixes the issues in JRUBY-153 and JRUBY-341, adding lots of tests for BigDecimal and much better coercion handling and such."
10798d5cf8c4844c2961ee35e4e5c3005dd8108d,2,JRUBY-472,"First fixes for JRUBY-472: refactor marshal logic a bit, provide a means to register marshals for classes without typecodes, fix RubyRange to marshal correctly."
3ef4bb4659f79a425567bf5098a499797b98d49d,3,"JRUBY-545, JRUBY-546, JRUBY-547","JRUBY-545: Windows users not able to install gemscomment out tests which fails on windows (noted in JRUBY-546)testEnv.rb was using RUBY_PLATFORM to check for windows, but this is now 'java' so changed it to use ENV['OS'].Those tests are broken in Windows [JRUBY-547]...Too many Mac users now? :)"
a063df9e2bcfd0d15aec5ebd2f51d24902ad0c3d,2,"JRUBY-475, JRUBY-415",Fix for JRUBY-475 and a part of JRUBY-415
749523790f27dff81226c7e9f9967e4db450860d,2,"JRUBY-345, JRUBY-353","JRUBY-345: problem interpretting rails template with ""for a in @b""JRUBY-353: ""for x in y"" breaks on object from java, ""object.each do "" still works"
9cfaa638fc4c0e702f439b1babbc1f8d98c32921,2,,JRUBY-562: CallNode Position should contain IterNodeJRUBY-563: WhenNode Position Fix
bb20e69fca02df78c52e9c534db24e9f4dda0509,2,JRUBY-604,"JRUBY-599: JRuby needs a COW, primitive array backed builtin ArrayJRUBY-604: Hash#sort raises exception"
6fac9238fcfb5f6d6c494a11fe7300a0dde1f63d,2,"JRUBY-593, JRUBY-587","Fix for JRUBY-593, and partial fix for JRUBY-587"
14ca27c7f1d7c31a65f227782217fd16288377ba,2,"JRUBY-529, JRUBY-592","JRUBY-529, JRUBY-592: Patches from Miguel"
cf0bccafaee1bf01bf0ed77c674af52c2df95870,2,JRUBY-611,"Fix for JRUBY-611, basic ARGF support, and also fixes a bug in splatting. (to_a added to the metaclass won't be called for splatting, which is wrong)"
bacc83bf38444407f30e6a8b586f7fa281c617fa,3,JRUBY-521,"Fix for JRUBY-521, also remove stuff that didn't compile on 1.4. Also move to BouncyCastle 135, for Java 1.4."
9dfc2a4c0f16b7dc845c70dd5c8df31df285c276,2,JRUBY-625,"Fix for JRUBY-628 and JRUBY-625, by Bill Dortch."
88740c2011c144a33bedc0af11b40fa072f54d05,2,"JRUBY-638, JRUBY-639",JRUBY-638: Signal.trap stub can take more than one argument...JRUBY-639: When no bouncycastle libraries we should stll have rudimentary digest support
bfa108819511ccfb206c6b3c3cb7eed495079925,2,"JRUBY-657, JRUBY-658",JRUBY-657: String.to_str logic wrongJRUBY-658: Derived classes of String should not call explicit to_str method
146cc75dde1dc3cd096672a67d262d3b0b3e5a03,,,"Fix for JRUBY-675, also removing PlainCharset"
431c3b91f8813d57a14ad6680648d02fe200399b,2,JRUBY-714,"Fix for JRUBY-714, and add a Process#pid-method"
debc2fb827a37c3f5b0c0a298a28205431a3d2df,3,"JRUBY-716, JRUBY-711, JRUBY-707","Fix for JRUBY-716, JRUBY-711 and JRUBY-707, by Mirko Stocker, Thomas Corbat and Bill Dortch respectively."
fa648a8de0015392511c2c18cd645653e5df8421,3,JRUBY-723,"JRUBY-723: someone beat me to it.  But also rename and make fields private,and reformat code"
df377e408a365ae316e2bb398ff3ef5e6c4a4848,2,"JRUBY-727, JRUBY-763",Tentative fix for JRUBY-727 and JRUBY-763.
bfe6c7ffcc4bb2f836bb895b1508f33992916c68,4,JRUBY-804,"Partial fix for JRUBY-804. Adds dumping of recursive objects, but loading doesn't work. Also fixes a few potential bugs, and the id format."
b4939d610269c777bf1e95c84247a95c2b0a6dd4,2,JRUBY-799,"Another rework of finalization, much simpler now. Also fixes JRUBY-799, so finalizers will run whether ObjectSpace is enabled or not."
d33111146447941a3dec8602bd5948add36cc8cd,4,"JRUBY-805, JRUBY-798",Fixes and tests for JRUBY-798 and JRUBY-805: implement Thread#keys and use actual objects as keys instead of converted java.lang.String objects
d77f8c9202ed39af9f9aae4987650e3a6fe62508,2,"JRUBY-361, JRUBY-842",Fixes for JRUBY-361: supply a real binding to trace functions. Also fixes JRUBY-842 by short-circuiting STI methods so they trace instead of doing fast STI dispatch.
f44de66a089f6fdae0906f2235493d66c24a2a79,2,"JRUBY-848, JRUBY-847",JRUBY-848: getCanonicalPath in Java 1.4 will report the trailing '.' in things like '/.' or '/foo/bar/.'JRUBY-847: Compilation fails under IBM JDK 1.4.2 (WAS5.1.1) - Character.toLowerCase(char) cannot take a byte
0c0febcffb4d761480889a267d10c99041c37ca5,,,"Fix for Raphael's JIT issue with Rails...don't compile methods on anonymous classes. JRUBY-831. Also see JRUBY-857, which will attempt to actually repair this issue."
94224312a6afcd2630ae5102eaf065707c4ba8b5,2,"JRUBY-228, JRUBY-2",For  some reason DefaultRubyParser.y and testEval did not commit from my commit yesterday for JRUBY-228JRUBY-2: END syntax does not appear to fire correctly
eb05ebdeb31050fee1be4cd931402ecfe172950c,3,"JRUBY-858, JRUBY-866 ",JRUBY-858: Eval within instance_eval seems to have the wrong self.JRUBY-866: struct and its use of metaclasses is not quite right (for inspect and ==)Previous two issues fix last test case in JRUBY-531Remove extraneous unused importsRemove some set-only vars in thread
10ee61746fe23e9062af04d7b45e9e7e46b216a0,2,"JRUBY-793, JRUBY-883",JRUBY-883: Ruby classes should not be includable / extendable (by Bill Dortch)JRUBY-793: class_variable_set and class_variable_get methods missing from Module (by Bill Dortch)Added smll benchmark
20733ca4c3207646405a9fc4a5178ea92a4ef6ec,2,"JRUBY-450, JRUBY-669",JRUBY-450: JRuby Accepts Multi-line Array Concatenation Syntax ErrorJRUBY-669: Strings shouldn't have unary plus defined
14b3a6f89067d90fa71a2dd7bce0846bea89b397,,,"JRUBY-901, JRUBY-904, JRUBY-907:  Maven pom fixes- remove system dependency requireTest.jar- make asm et. al. provided dependencies for jruby-complete"
f221245ae886f16607d505f338374422f1585f2e,,,JRUBY-926: Rails script/console broken in JRuby 1.0.0RC1 (was still working in JRuby 0.99)Plus...remove_const now also un-autoloads (missed in my original autoload changes)
926723020c6156f464e45f4f4dfa2fdc7bc9381d,2,"JRUBY-867, JRUBY-930","JRUBY-867:  Iconv character set options (//ignore, //translit) not supported (by Soichiro Ohba)[This does not support transliteration, but does support ignore]JRUBY-930:  Small code fix (extra new LoadService! :) ) (by Soichiro Ohba)"
0e190445c5e145c4e1635e0ab47f96a92eb62558,2,JRUBY-927,JRUBY-927: Kernel.sleep(n) sleeps forever for n < 0.001I also added the no-argument version of sleep for infinite sleep
28e209608118d6e9c16dcdb6cb2d8039e7617ee2,2,JRUBY-688,"Lot's of String stuff, notably String#split (and other methods: scan, sub, gsub, tr, ljust rjust, center... and more).Also partial work targeting JRUBY-688"
ffe36dc64337e1885d5139e5ba8cbe80db45de9a,4,"JRUBY-936, JRUBY-934",JRUBY-936: The argumentsError is required in Struct.new (Koichiro Ohba)JRUBY-934: Unsupported NKF module (Koichiro Ohba)Various escaping JumpException errors we have seen in apps like Typo (which now works!)Remove some dead code
475ab274346b6b60ddbb53f369200408f68e9b15,,,"Fix for JRUBY-801, add as much support for customization of YAML as possible with the current architecture. That means to_yaml works as in syck now, if you don't look TOO closely on the objects passed around. Also, yaml_new gets called and yaml_as does correctly too. This is all I will do for 801 for now. Sometime we may need to rewrite YAML support for in the shape of SYCK, but I do dread that day."
c9f6241d841acfacf0e4147c8110611614b6e551,2,"JRUBY-24, JRUBY-955","JRUBY-955: RubyModule public_method_defined?, private_method_defined?, protected_method_defined?JRUBY-24: position from passed in arguments not passed"
127e986f6474f6e60001a95a228a08cfc6ad97e0,,,"Jonathan Paisley's fixes for JRUBY-987 (and by side-effect, JRUBY-941): don't reuse ""args"" variable where blocks are involved in Java integration code."
e97d967b4d3037764ae832822d5181eba895c9f0,,,"JRUBY-1116, JRUBY-1117: copy windows test changes to trunk"
56d9e338199a6cc44b709b69872175af3620b62b,2,"JRUBY-749, JRUBY-948","JRUBY-948: undefined methods are not preserved when a module/class is dup'ed.JRUBY-756: ""private method called"" issued for undefined methods with explicit receiverJRUBY-749: Visibility issue: private method reported as method_missing and not private in class_eval[Patch by Marcin]"
1b969967d3fbf605dae849e7eb2619941061eb54,,,JRUBY-969: finish inclusion of rake and rspec -- get it in themaven-generated complete jar.  Also make -S do the same thing as --command.
3b068a3754b8bfb7496516d7100fd94497088bd0,2,"JRUBY-26, JRUBY-1028","JRUBY-26: Various special globals should be thread specific and not shared by all threadsJRUBY-1028: The special global variables ""$="" and ""$~"" are not defined"
e6bb058f5376da0f7d45328083e4b5b99845d3e4,,,Fix for JRUBY-1075: revert part of fix for JRUBY-1006 to allow class var defined? lines to work in singleton classes agin.
f8d46054415af6ed4cb64c83b4723f9aaf57ed04,2,"JRUBY-1089, JRUBY-1090","Fixes for JRUBY-1090: Exception.new does not take more than 1 argument, JRUBY-1089: Exception#message should default to ""Exception"""
4b454b7e9cf832b8064ac50723b2413bdb95bca5,,,JRUBY-1290: DRb fails to bind to socket: Address in use (Errno::EADDRINUSE)JRUBY-1291: 1.0.1 killed the DRb server
843810cbc663be74fe9b6effc0a02995b7111935,2,JRUBY-1308,"JRUBY-1308: File.new using File::CREAT should imply reading, not writingPlus also make CREAT actually create the file regardless of other flags since that is what CREAT is asking for."
5417cc3c69504b9f9c2945a365bc7a40e39ad94f,3,"JRUBY-1242, JRUBY-1317, JRUBY-1318","JRUBY-1242: ClassCastException: org.jruby.ast.NthRefNode w/match variables used as #$1 in here document in string substitution (test case by skaar)JRUBY-1318:  :$`, :$&, :$\, :$+ goes boomJRUBY-1317:  Heredocs ending in non-curly expansion do not include final newline"
3e3b22b71e49b85c516774b2cb3603ee2f2965fb,2,"JRUBY-1288, JRUBY-1431",Fixes to JRUBY-1431 and JRUBY-1288 by Alexey Verkhovsky
d9b8a70318730dfa4c48c920484984af5dacc083,,,"Fix for JRUBY-1393 and JRUBY-1302, missing ECONNABORTED errno"
71dee7236e8a801884dd7ddb68b7757c2b9d1aac,,,Fix regression in String#split for empty string argument and added some tests for it. Fixes JRUBY-1448.
627de18d06c15c8ec6d241015b64d95c856b3a51,2,"JRUBY-1459, JRUBY-1460","Fix for JRUBY-1459 and JRUBY-1460, fixes to Sockets, more compatibility in error messages, and DON'T swallow all exceptions on write()."
1df625505f7816f712daddf43b9c3431ce915990,2,JRUBY-1451,"Fixes for JRUBY-1451, verbose warnings should include one for uninitialized vars. Also fixed -v not running a given script."
8438de79af20af1a08d81c51f213db82ec483f4f,2,"JRUBY-1064, JRUBY-1106","JRUBY-1064: Rubinius core/object_spec failures (patch by Patrick Farley)JRBUY-1106: Process.euid() not implemented, causes MailFactory failure"
98cdb8601a1d250cbd97cdbd17bf17cd40552e0e,3,"JRUBY-1581, JRUBY-1277, JRUBY-1502","Fix some signal issues, including JRUBY-1581, JRUBY-1277 and JRUBY-1502"
6a7310b5c071f11c186e6bb57459c6649a017315,2,"JRUBY-1596, JRUBY-1600","Fix for JRUBY-1600 and JRUBY-1596, by Vladimir Sizikov."
7a8b087906f79d8f506ffc8ecc329cb4c97b324a,,,"Disable retry outside of rescue, and comment out tests where it's used. The two related bugs are JRUBY-1629 and JRUBY-1522. This allows rubinius specs to run to completion, but completely breaks the partially-broken retry support in JRuby."
4ea9928d47273f8f5db65433835bdf95c6e9ddef,2,"JRUBY-1652, JRUBY-1655",JRUBY-1652: Time#gmt_offset returns incorrect values for DST (patch by Vladimir Sizikov)JRUBY-1655: JRuby fails built-in unit tests from time.rb lib (patch by Vladimir Sizikov)Fixes Rubinius spec failures
17a1e19e01dfb3e3601d3a489b4f25bbded2836b,2,"JRUBY-1700, JRUBY-1715",JRUBY-1715: Incompatible behavior for ||= in HashesJRUBY-1700: rio gem problems (partial) (patch by Vladimir Sizikov)update .classpath to reflect joni.jar
e389d07b921f46266feb9b28a62abbfecbf3907e,2,"JRUBY-1723, JRUBY-1706","JRUBY-1723: String#initialize and String#replace on frozen strings behave incompatibly with MRI  (patch by Vladimir Sizikov)JRUBY-1706: [PATCH] Bad format for ""frozen"" error messages (patch by Vladimir Sizikov)"
c8a60c62dbae1f6c8b1de333fe96406f04148793,4,"JRUBY-1732, JRUBY-1730, JRUBY-1726, JRUBY-1672","JRUBY-1732: String#rindex works incorrectly with FixNum parameters (patch by Vladimir Sizikov)JRUBY-1730: String#slice! and String#[]= with negative ranges behave differently than Ruby (patch by Vladimir Sizikov)JRUBY-1726: String#inpect and String#dump behavior is different from Ruby (patch by Vladimir Sizikov)JRUBY-1672: JRuby File.rename() behavior different from Ruby, causes log rotation issue (patch by Vladimir Sizikov)"
7d9d9f3c9a04918bd3db1316992b69e4b9ed4b9d,,,"Fix for JRUBY-199 (and related JRUBY-1513 and JRUBY-1735). Caches proxies in Weak/Concurrent Map-like cache, which replaces the ineffectual JavaObject cache.  TODO: unit tests, measure memory/performance impact.Also, miscellaneous JI cleanup."
c4f15493f97fe70046c6f883750a1da863321a49,,,"Fix for JRUBY-1768 and JRUBY-1786, call yaml_initialize when loading if it is present on the target type."
4c28ffe8b3ec7115858f90a097f2bb528d2791ae,2,"JRUBY-1825, JRUBY-1826",JRUBY-1826: UnboundMethod/Method.== fails for some Rubinius specsJRUBY-1825: UnboundMethod.clone ends up becoming a Method
b06a935233fba77b0ec93623d37e139e5f99f053,2,"JRUBY-1828, JRUBY-1807",JRUBY-1828: Module.<=> should return nil when other is not a moduleJRUBY-1807: Lots of spec failures for Time
3f959142dd50be491e74a55c8aa3a352d3593136,,,JRUBY-1878: Failing to send mails to msmtp mail server using IO.popen. For instance impossible to send mails to GMail using msmtp. This is a regression.Special help from VVSiz and rvalyi in figuring this outNot a duplicate of JRUBY-1557
2c780dfbe6f556ec9a4728fa5515d70727d6a27f,3,JRUBY-1592,"Fix for JRUBY-1592, Math.asinh problems.Also updated excludes for recent changes and to remove the asinh exclude."
80d9f80cd78843a3bb6440a173203ae22bb6e5c5,2,"JRUBY-1937, JRUBY-1938",Fix for JRUBY-1938 and JRUBY-1937 (patch by Vladimir).
1326925af5074e96b4b259704dbe95526d47ec04,3,"JRUBY-1970, JRUBY-1971, JRUBY-1972",JRUBY-1970: Time.now has low precisionJRUBY-1971: Time#getgm and Time#getlocal work incorrectly when usecs presentNOTE: Commented out one Yaml tests due to JRUBY-1972.
7c6bc6aedad6ec7eae4523c8fd1a3a84dfa399e9,2,"JRUBY-1984, JRUBY-1985",Fixes for JRUBY-1984 and JRUBY-1985
74e78ff6fe1cb2c04333342f4f3d21b33ceddb54,2,"JRUBY-1982, RJRUBY-1983",JRUBY-1983: File.utime and File.mtime (patch by Wirianto Djunaidi)Also fixed ENOENT problem listed in comment by Assaf (which is JRUBY-1982 in cause)JRUBY-1982: FileUtils.touch / File.utime failing if file exists.
2fa81574ffeaf58d286a02c797146705b0d8de12,3,"JRUBY-1986, JRUBY-2000","JRUBY-1896: Missing method: IO#statJRUBY-2000: IO#tty? returns false for ""/dev/tty""Fixed error in build.xml for all specsFixes provided script of JRUBY-1608, but the issues main descriptionIO/File still has issue that fileno is not file descriptor."
5f31e243a2fa88c35e6b9d4a06a986a07c34d71c,2,"JRUBY-2020, JRUBY-2022","Excluded IO#close and IO#close_write failures.Issues for the failures: JRUBY-2022, JRUBY-2020."
c090a3211fb860057412a4ec684c7fede88405dd,,,"Fix for JRUBY-2061, implement UNIXSockets using JNA. Also fix some Errno problems"
dbce9b39780d65ef6137361d27a47629647381a8,,,Fix for JRUBY-1526 and JRUBY-1545 based on Bill's suggestion.
967ae41af93687629c7875096b94a2d1c2694ff8,3,"JRUBY-1915, JRUBY-1050, JRUBY-1713","Fix for JRUBY-1713, JRUBY-1050 and possibly JRUBY-1915. Fix the load order to always do CWD loading last"
0cdac1888974f36f26c6df403f12942b3897d599,,,JRUBY-2118: File#truncate crashes JRuby with NPE when invoked onclosed file.This also fixes two rubyspec crashes.
8c338950e5e04ce139727dc30da6cad4b1923d25,,,"Lots of regression tests for backtraces from exceptions.Currently, most of them fail due to various bugs:(JRUBY-1931, JRUBY-2112, JRUBY-2120). Fixes are in progress."
290f7a1915ead5a55e1413d2fad1f3cfb1ab7b16,,,"JRUBY-2173: String#pack with 'Q', 'q' patterns should treat 64bitnumbers as big-endian. This fixes recent rubyspec failures.Also, rubyspecs are updated. Spec changes summary:8.4% spec/ruby/1.8/core/file/0.1% spec/ruby/1.8/core/process/0.4% spec/ruby/1.8/core/regexp/shared/12.2% spec/ruby/1.8/core/string/0.8% spec/ruby/1.8/language/0.1% spec/ruby/1.8/library/digest/md5/3.8% spec/ruby/1.8/library/digest/sha256/shared/21.8% spec/ruby/1.8/library/digest/sha256/3.9% spec/ruby/1.8/library/digest/sha384/shared/21.8% spec/ruby/1.8/library/digest/sha384/3.8% spec/ruby/1.8/library/digest/sha512/shared/21.8% spec/ruby/1.8/library/digest/sha512/0.2% spec/ruby/1.8/library/socket/60 files changed, 980 insertions(+), 73 deletions(-)"
29c289eb843b7ecc8f859ba5842fbafb51ea616f,,,"JRUBY-2189: jruby -X does not provide help on extended options.Also, restored printing of error messages for specificcommand line option errors.For example: 'jruby -C' should not only print help usage,but also ""-C must be followed by a directory expression""."
982486857d156a00eafdfb409dac06b61462a353,,,"Fixes to allow exec'ed in-process subprocesses work more cleanly wrt stdio, by allowing the ""parent"" processes's normal Java IO stdio streams to be used directly in the ""child"" process. JRUBY-2156 and JRUBY-2154."
993f8c99ef835ed7c86910dc4ec34919b335131c,2,JRUBY-1173,"A bunch of findbugs fixes from JRUBY-1173. Also renamed generated callbacks to be Callback in their name instead of Invoker, to distinguish from actual invokers."
67138f86b8fb0bbfcb1e136dd0408c227146c6dc,2,JRUBY-2284,JRUBY-256: Add rdoc/ri to bin directory in distributionJRUBY-2284: Distribute rdocs in our distribution
d9389629884abeb62ccd7ddcf325cd9ea2338a4d,2,JRUBY-2284,"JRUBY-2284, JRUBY-256"
bfcc2dc768993ba36abedf4658d1bb2d4a5cff4b,3,"JRUBY-2334, JRUBY-2349, JRUBY-2364","Updated rubyspecs, new excludes(JRUBY-2334, JRUBY-2349, JRUBY-2364).Linux run is 100% clean."
f03a771c9d4e4a0950ee293a39fbac6394b102ee,2,"JRUBY-2254, JRUBY-2367","Partial fixes for JRUBY-2367 and JRUBY-2254, at least gets JRuby running under IBM J9, though tests and specs blow up."
714843dd03c9622c4f296c942540920bc81033b8,2,"JRUBY-2406, JRUBY-2407","JRUBY-2405: Zlib::GzipFile.wrap has bad signatureJRUBY-2406: StringIO.new """", ""r+"" (rb+) is not open for writingJRUBY-2407: StringIO.new does not accept MODE constantswrap is used by current rubygems librariesLots o mode changes to StringIO"
83a50d73cd139eac3151856ae4e945db76d9edf4,2,JRUBY-2388,"Fix for JRUBY-2388, revert fix from JRUBY-1866."
69c8c87a5dc0a64c561b963b3d62d83f2549c179,3,JRUBY-2523,"JRUBY-2523: Deprecated StringScanner#getbyte is infinitely recursivePatch by Dave Halliday.Regression test added. Also, some more specs added to rubyspecs.Signed-off-by: Vladimir Sizikov <vsizikov@gmail.com>"
6af2c161880235f73a1218ae95bbef9cd73b5289,,,"* Fix for JRUBY-2551, proxy-subclass-thingies not using getDeclaredConstructors and therefore no ability to override protected constructors from parents.* Also twiddled some MiniJava code that didn't make use of the fact that getConstructors only returns public, and still checked public for each."
080516185c7e3449b515799dcfaadecad2cc8608,5,"JRUBY-2543, JRUBY-2544, JRUBY-2553, JRUBY-2556, JRUBY-2558","New rubyspecs, new excludes: (JRUBY-2543, JRUBY-2544, JRUBY-2553,JRUBY-2556, JRUBY-2558).The spec run is 100% clear on Linux."
b65d7f4d54580f82b0726af85afbb37cefe209c4,,,Update to newer jna-posix.jar for JRUBY-2453 and JRUBY-2383
9a20fee2e7de29a48dab3fbd3eb15e0abc45c7ab,,,JRUBY-2570: BigDecimal#to_f incorrectly handles negative zero.This fixes 2 rubyspec failures.
28734e158c5252d89b9ffb4142809ff0abe1f40e,,,"Revert r6814: Fix for JRUBY-2300, add require 'stringio' because of RubyGems bug where it expects implicit require to happen in YAML. This was already fixed in another way two weeks back"
4ec23223ca174395185f60573bc3d3959a178443,2,JRUBY-2585,"1. JRUBY-2585: Hash.[] should call to_hash if only one argument is provided.This fixes one rubyspec failure.2. Updated to the latest rubyspecs:102 files changed, 961 insertions(+), 94 deletions(-)2.6% 1.8/core/file/constants/1.5% 1.8/core/5.6% 1.8/library/net/ftp/conditionvariable/65.1% 1.8/library/net/ftp/3.0% 1.8/library/net/11.3% 1.8/library/rexml/element/10.1% 1.8/library/rexml/text/"
afe466dba594dd645d6e98561c4e56d5523e4d88,3,"JRUBY-2632, JRUBY-2635, JRUBY-2636",IO#readpartial fixes:- JRUBY-2632: IO#readpartial doesn't handle unget char(Heavily reworked patch by Kevin Ballard)- JRUBY-2635: IO#readpartial crashes when negative argument is specified- JRUBY-2636: IO#readpartial doesn't honor maxlength parameter andalways returns the whole buffer content- IO#readpartial raises NotImplementedError on closed streamsRegression tests for all cases added to the rubyspecs.
8efb0e16927ac5d3840b89674642e5e73ec8ef98,3,"JRUBY-2648, JRUBY-2649, JRUBY-2498","- JRUBY-2648: Regression: JRuby always starts with Client VM on windows- JRUBY-2649: Many long options don't work with JRuby on windows- JRUBY-2498: --jdb option is non-functional on WindowsTested on both, Vista and XP.The regression tests will follow."
330a617f4521652c2e836d2b983ad98886d17611,2,"JRUBY-2669, JRUBY-2667",- JRUBY-2669: StringScanner#peek crashes JRuby in some situations- Second part of fix for JRUBY-2667: Plenty of new StringScannerfailures for JRuby (fixed two more spec failures).
8b9f119e80a9957c5c9e52f866c87ab75bfcbfc3,,,"Partial improvement for JRUBY-2714, only run the ASM verifier if DEBUG. Improves loading of a file with several defs by 2-3x."
8d1eef47be27649a60fd5ac2e969ac6a5195375d,,,"Fixes for JRUBY-2744, reenable c-call and c-return tracing for native methods.I added back the tracing, but it's only enabled at runtime if you set jruby.debug.fullTrace=true because it introduces significant performance hit. --debug enables this by default, however. We'll need to look at unification of all debug/trace settings, especially since I think it's feasible to add tracing to jitted code now that there's a standard --debug flag we could use to turn such traces on.I also added a number of config params that weren't showing up in the ConfigMBean."
42785545a2e4ac08e50672cf507b1c4716a84b20,2,"JRUBY-2769, JRUBY-2770",- JRUBY-2769: I/O Error when using reliable-message library- JRUBY-2770: IO#sysseek after IO#sysread raises IOErrorOne rubyspec failure is also resolved.
9b634f03f511d2f4990a866cf591c87e4c22b1e1,,,More fixes for concurrency in Enumerable: never save ThreadContext away in an anonymous class instance that might be called across Ruby threads. JRUBY-2773.
829672844a07f8e39b98f8171895b936a9119cff,2,"JRUBY-2146, JRUBY-2147",Fix for JRUBY-2147 and JRUBY-2146 from Fabio Lessa. Thanks!
85022720438850a40766f771acea8f314b925186,,,"Add tags for IO#close and IO::popen specs that launch ""yes"" as a subprocess, since they hang the run. JRUBY-2661 discusses the hang, and JRUBY-2790 is the bug for the specific problem with popen."
5d755c21a3a3dda8b6e41bfcfcf63b42685b5bf9,,,"Tagging failing specs under OS X, Soylatte, to get the spec run green. See JRUBY-2791, JRUBY-2792, JRUBY-2793, JRUBY-2794, JRUBY-2795, JRUBY-2796, JRUBY-2797, JRUBY-2798."
06c90429b18f932786b6366fcece68ee2a0d70a9,,,- JRUBY-2805: Regression: JRuby command line parsing on Windows is broken- Regression tests for JRUBY-2805 (command line parsing broken on Windows)- Regression tests for JRUBY-2648 (JRuby always starts with client VM)
d7ad2cc5210c21a33391f91961c72cb12a58bd14,,,"Revert ""Added OSGI properties stuff to build/jar process for GlassFish and others.""This reverts commit a1d0428e8f13e343aff88311153b470a3378aaec.See JRUBY-2741."
24a1c73de4fdd011d5d9a5cd92bc5b23e2869ba5,2,"JRUBY-891, JRUBY-2869","fix JRUBY-2869, and partially address JRUBY-891"
5c6f616e08ebeb428ac32efc909662ce5d0fd483,2,"JRUBY-2836, JRUBY-2837",JRUBY-2836: Empty expressions in Hash literals crash JRubyJRUBY-2837: Empty expressions in Arrays handled incorrectly
1cb9f548a474cfd04d839375fba6e19cfdc9af18,2,JRUBY-2969,Add specs for JRUBY-2969 plus a fix for an unreported bug: only the first interface included got implemented.
ca3d86005f5ea133a1e32bb6e7b869d11e035193,,,Specs for JRUBY-2959. Also added spec dir to test sources in NB project.
5bead3fbb7fd944d836ad84daf20904385889af9,,,"Revert ""Fix from JRUBY-3022: Fix for ShellLauncher.shouldRunInProcess not being strict enough. Needs a test.""This reverts commit 078580b50eb704528f746bbcf7f95d755d2f11cb."
04ce842cc49a9e5e9830a53a27e219d1ed0867be,2,"JRUBY-2878, JRUBY-2883","Fixes for JRUBY-2883: Many Array methods don't handle recursive arrays properly, JRUBY-2878: Array#hash with recursive array crashes JRuby. Affected methods also match 1.9 behavior."
b6045ce63c3063cd069d3eee25a3ae9210a20e38,,,"More fixes for IBM JDK (JRUBY-3015), the -p test does not appear to work so I've filed JRUBY-3043 and disabled it under IBM."
0f1bf2e8cb9bdbe7674db4e2b014039287ecbaeb,2,JRUBY-2939,"Pull out arity-mapping logic into a common piece of code and add some error messages for invalid combinations of arities and actual arguments. JRUBY-2939: When binding a restarg method, display useful error if rest != true or else just do the right thing."
59793962d7cabfe27bacdd76f3d3fc6684f7ac4c,,,JRUBY-2538 was fixed in past...remove tag.  unused imports
514ff0f0ee2b022600c55952f016a044fc857664,,,JRUBY-2538 was fixed in past...remove tag.  unused imports
c3a96bb2e545b7066c6a2f847eecf91966681ab3,2,JRUBY-3204,JRUBY-3204: IO.read and IO.readlines do not take a block (patch by John Fremlin). Remove unused imports
96361367e7a69f00c66015408044de9b3a969d9c,2,"JRUBY-3077, JRUBY-3114",Incorporate all new and updated ruby_test tests with broken tests commented out. See JRUBY-3077 and JRUBY-3414.
1d1e533478528a727fbcc9ea6924e6f33422cb03,,,"Kinda hacky fixes for exceptions thrown from toplevel; backtrace isn't great, but it isn't NullPointerException. Should at least improve JRUBY-3439 and JRUBY-3345. I will leave the latter open to continue fixing the trace."
c18f9ba225fa1648e21840406da5e783377b1128,,,"Update to latest rubyspec/mspec, clean up CI configs, and tag specs from JRUBY-3459, JRUBY-3470, JRUBY-3471, JRUBY-3472, and JRUBY-3473."
854953308a4985e4ca2dc79828c5ed3bef82d582,,,"Fix for JRUBY-3647: Severe performance degradation from 3d9140fafcda9c4fe6b9d5a1fec0ae9822877e03My lock-free approach to fixing JRUBY-3551 was clever, but introduced too much overhead into applications that do a lot of includes at runtime (usually in the form of obj.extend). So this falls back on the second-based fix, introducing a global hierarchy lock for when multiple threads concurrently tweak the hierarchy bits. Should still be as safe as before, only slightly slower for hierarchy modifications, and way faster for creating new classes or including modules."
065a6b675b2f9f4bf046cede07a50da9b59c795b,2,"JRUBY-3818, JRUBY-3820",Fix for JRUBY-3817: Timeouts in Net::HTTP raise Timeout::ExitException instead of Timeout::Error for Ruby 1.8Fix for JRUBY-3820: timeout library should throw an anonymous exception type while unrolling stack
168b32d200ad916aae0f894c4c0565ef12954da9,2,JRUBY-3682,Fix JRUBY-3682 and fix some more tags
38b0f93ab38280889f6e2ac819284de29b9a1f40,2,,Add a boundscheck to the encoding-aware portion of RubyString.inspect to avoid array overrun when string is not encoded as expected. Also restore deflate spec which appears to still be broken in some way (JRUBY-3775).
7eaf11147b9965eaea1fa2adc653a88c6c191d00,2,JRUBY-3860,Disable or modify tests that are no longer valid under 1.8.7. Also added some valid failures for Rational in JRUBY-3860.
ebbf7885e2a959d1bbd7d3c25ea2786e59a1ba6c,,,Fix for JRUBY-3876: JRuby crashes on using the three-parameter version of TCPSocket.openAlso fixes JRUBY-3875: TypeError when providing nil as the third parameter to TCPSocket.new/TCPSocket.openThanks to Damian Steer for the fix!
4b49ba52f4bd89b927dbc4a7b48265e03dd5aa7a,2,,"JRUBY-3657, JRUBY-3855: Tag ruby_bug specs as such with 'ruby_bug[1.8.7]'"
7a038f951d33a30c99e2cb041e7d43d08248f0ba,,,Add .MD5 file generation to dist files and get jruby-complete.jar generating as part of 'dist' target. Addresses JRUBY-3929: checksums for new versions please
79ae9a9bdb990d7115922a08642be9da447b6247,2,"JRUBY-3433, JRUBY-3605","defaults IO encoding, merged with headius' patchFixes JRUBY-3433: Encoding.default_internal and Encoding.default_external missingPart of work for JRUBY-3605: [1.9] IO.initialize missing option hash parsingSigned-off-by: Charles Oliver Nutter <headius@headius.com>"
48cf3fb6a589e782650026abf155d2bd39665c8a,,,Fix for JRUBY-3956: Can't do Enumerator#next in --1.9? Not implemented yet?Also underscores the need for inline caching for Java method bodies calling to Ruby.
4d3196b46c9298a708793d8b17fb447ffb30d26c,3,,JRUBY-3984++: [1.9] Array improvements to solve several specs (Calavera + me).  Also some name change refactorings.
caa3f036d53c3d7a5b58b4d48444c54761baf761,,,[19] new modules which get thrown (though not being thrown yet -- see JRUBY-4014)
853e083ea7d54b86883a0e5f465d3f6c1c69ed7f,3,"JRUBY-3885, JRUBY-3473","Adde a script to verify JRuby rubyspec exclusion tags.The script scans all tag files and report invalid entries,i.e., those that have references to already resolved/closed bugs.Sample output is like this:Verifying tags in '/opt/work/jruby.git/spec/tags'...62 JRuby jira issues used in the tags.JRUBY-3885 -- Wrong State: Resolved. Used in the following tag files:- /opt/work/jruby.git/spec/tags/1.8/ruby/core/enumerable/none_tags.txtJRUBY-3473 -- Wrong State: Resolved. Used in the following tag files:- /opt/work/jruby.git/spec/tags/1.8/ruby/core/thread/exit_tags.txt- /opt/work/jruby.git/spec/tags/1.8/ruby/core/thread/terminate_tags.txt"
8d0d90e93973ddf55a1ac8e3478ec9e5dcd80868,,,Update jaffl to 0.3.4 and jnr-posix to 1.0.4 to hopefully fix JRUBY-4073 and JRUBY-4047
680c9caccbd4cdfc68c078923ab90b16c45af190,,,"Revert ""JRUBY-4051: jruby-1.4.0RC1\bin\) was unexpected at this time""Not working 100% yet.This reverts commit 2a62d2595c457b9de327f00cc1da1b623ff5c43a."
f24ed90d2ce425d9a7b34cb258a63edca6fcdec4,,,"JRUBY-4060, JRUBY-4062: Fix RUBYOPT leaking into ARGV"
001f04b4360e89726e7c8bf853d4b9938b89873c,,,"JRUBY-4121: [major regression] Most *.bat commands don't work anymore.Revert ""A couple dangling fixes to existing bat files"".This reverts commit 72d96d8403fc225e6d22971ff565267071f55a03."
6632b89e947a15f7923a081b89e81573c743a8d4,,,JRUBY-4122: RbConfig/Gem cleanup after switch to native launcher*NOTE*: This also requires the following change fromjruby-launcher repo: c17e095.
14363bad41a936919f5d29c5af9cc7c19c13b7eb,3,"JRUBY-4124, JRUBY-4120, JRUBY-4122","Updated jruby-launcher to version v0.3.This fixes:- JRUBY-4124: [windows] Native launcher doesn't honor JAVA_HOME env variable- JRUBY-4120: [windows] Native launcher doesn't honor CLASSPATH env variable- Fix, needed for JRUBY-4122: RbConfig/Gem cleanup after switch to native launcher."
37f91a381208f80c26161a0f0ca1d6e817e97bad,2,,"Make most of the key methods in LoadService be protected rather than private, so they can be overridden and accessed from subclasses. JRUBY-4138: Open up LoadService some more"
2bcf5f1ff079fa914ed4b58d741654a0159dc38d,3,,Tweaked Rubicon's test_io on Windows:- Excluded test cases due to JRUBY-4186 and JRUBY-61.- Proper Windows detection in Rubicon's test_io tests.
20a1121a93ea3ae7072789eb01c9ad2c6b4d1f04,,,"JRUBY-4206: Array should provide its own map methodThis also partially solves 'whichr' gem functionality on Windows,reported in JRUBY-4205."
eb1f44e4ba939ba9b1d07e11c2e9a4cd127b9a79,2,JRUBY-4232,"JRUBY-4232: Socket.bind() not available with jruby- Socket/Server sources clean-up (removed trailing spaces, TABs).- Some more tweaks, based on patch by David Calavera.All newly added RubySpecs for Socket#bind pass now, on Windows and Linux."
ce06e84f194200682af069946df0e76f33c73d11,4,,"Switched to the latest RubySpecs.Plenty of new specs, plenty of new exclusions:JRUBY-4176, JRUBY-4335, JRUBY-4337, JRUBY-4339RubySpec changes:76 files changed, 726 insertions(+), 257 deletions(-)11.8% core/array/4.7% core/bignum/6.4% core/kernel/6.4% core/proc/shared/5.4% core/proc/12.6% core/string/21.7% core/11.3% language/5.1% library/zlib/gzipreader/4.6% library/5.1% shared/array/4.0% shared/rational/"
c56bba4bf76191004ed284b4ba61b2c1e3ece038,,,"Eliminate some and reduce other setAccessible calls for JRUBY-4246.* For all methods in all classes encountered by JRuby, we were doing setAccessible one at a time. This meant that even if the class was never directly used (and lazily initialized) we still called setAccessible for all methods. For classes that were directly used, we ended up doing a second round of setAccessible calls for each named group of methods. The latter remains, but is now the only setAccessible for methods and constructors.* All fields were being setAccessible. In the case of static public final fields, which we create constants for, this was obviously unnecessary. In the case of regular fields, we only ever retrieved the list of public fields, so it was again unnecessary. Also note that in both cases we did the setAccessible calls eagerly."
0dca5f071c101f87dd8144056b79bdddcfef15d2,,,"Revert ""Add 1.9 support for Enumerator.new with a block. Inefficient right now, since it always spins up a thread-based Generator, when it doesn't necessarily need to unless you're using ""next"". A better impl should be done. JRUBY-4098.""This reverts commit a4a1bb7ba37626c3c70701de4f8109a9c982ba8f."
551a22a6389ea2f2cad1dac28781cabae630efe9,2,"JRUBY-3960, JRUBY-4141","JRUBY-3960:  Wrong precedence for defined? and &&=, ||=.  JRUBY-4141: Odd ||= behavior with ENV"
9d57dbc3b7b0d10dd4d8c6d49b73cf1af2e8e287,2,"JRUBY-61, JRUBY-4253","JRUBY-61, JRUBY-2140, JRUBY-4253: Merry Christmas JRuby windows users!Three-year old bug finally squashed!"
ea74a4d434ea3388b1a07c329ff1f00c1ac80dcc,2,"JRUBY-4388, JRUBY-4392",Updated jnr-posix to 1.1.0 and fixed a couple of bugs:- JRUBY-4388: [FFI] GetLastError always returns 0 on Windows- JRUBY-4392: [windows] File.link is not implemented
5cc49c5ce9bf2a08696e846f50fda6deedfe96b5,2,"JRUBY-4403, JRUBY-4404",Fixed two Zlib::GzipReader bugsJRUBY-4403: Zlib::GzipReader#read doesn't work after rewindJRUBY-4404: GzipReader fails Rubyspecs (for #getc and #each_byte)
128944212f8afa5490393014189aaac9f11a7eec,,,"Restoring excludes for proc with block specs, since JRUBY-4180 is not fully fixed yetRevert ""Removed excludes for proc with block specs (JRUBY-4180 is fixed now)""This reverts commit bbf010c1d53216374fa1dd639f7bca7f3228c702."
3f34471109ad0a8c5c6a22b1ad246c6a3c58ae1e,3,,"Update jnr-posix to 1.1.1, fixes 3 JRuby bugs (JRUBY-4177, JRUBY-4438, JRUBY-4439)JRUBY-4177: tempfile failure in WindowsJRUBY-4438: Dir.mkdir raises wrong error if the target is an existing fileJRUBY-4439: [windows] Dir.mkdir with non-ascii parameter creates a dir with wrong name (or fails)"
8f47f2135de10da7b34dbbcc1b2d45864947d4f5,,,"Revert ""JRuby-specific tweaks to win32/registry"", since JRUBY-4323 is properly fixedThis reverts commit 5f7df761241035c003f5d9f932852cd08763b7b4."
7ae726e8b1bb1ed6091d2ff1a7151ed4f7bbf882,2,,"Latest rubyspecs, latest tags (most notably JRUBY-4543 and JRUBY-4354)'ant spec-short' should be 100% green."
e283bdcaa8dae9dafc460ee84a58724b54acfe56,4,,"JRuby Launcher 0.9.9. Fixes JRUBY-4559, JRUBY-4581, JRUBY-4588JRUBY-4559: JRuby launcher should only add ONE JRuby JAR file from lib directory to its classpath automaticallyJRUBY-4581: add JRUBY_OPTS to list of args to be processedJRUBY-4588: [regression] Native launcher's logging is brokenThanks to Nick for imortant fix for JRUBY-4581."
fcb149b62ff063ff7e57c318b63639cb61582090,,,Bash-launcher part of fix for JRUBY-4559JRUBY-4559: JRuby launcher should only add ONE JRuby JAR file from libdirectory to its classpath automatically
7490bc66f166b54f9edd8ff4731f3867abe37a6e,,,"Update to the latest rubyspecs and mspec. New tags.Tags for JRUBY-4648, JRUBY-4647, JRUBY-4646, JRUBY-4645."
8e51e6e32ca9b779fce39778e49e9bccd2d023e3,,,"Fixes for JRUBY-2282 and JRUBY-2475.JRUBY-2282: Unclosed, unflushed IO objects might not write contents before program exitJRUBY-2475: JRuby and Builder::XmlMarkup (strange File interaction)This is actually a regression, caused by IO rewrite long, long time ago."
1ec01f99c9d504c5e1ffe233bed11c8e1338b943,,,"Additional tweaks for JRUBY-4553, to address regression in JRUBY-4651."
93b1257dad9a3915c6c6374d71d7c51e1dd9c460,,,"Revert ""Fix for JRUBY-4484: jruby -rtracer doesn't trace""This reverts commit 5f3de424615189193a722d754189a143b40cf6ed."
0cb3e3c5ad590ccb5b1510ed67d091a8b2d15e87,,,Fix JRUBY-4660 by reverting commit 1312e2915c5f0fcce07fa844acd11d3398d93faa.
30f643db6654fbbf81fdac9022a12545a7e59169,2,,Add test for JRUBY-3872 and JRUBY-4663.
c1672c484dac3b59403d16db17c6fbb469d0878a,,,"Add a new JI method selection path that compares arguments in sequence, automatically ranking better matches higher. For JRUBY-4680 and indirectly for JRUBY-4631 since it replaces that fix with this one."
e7e79b478e7533df153f6fec5945a20db4a1c789,3,"JRUBY-4703, JRUBY-4706, JRUBY-4709",Update Windows JRuby Launcher to version 1.0.1This fixes the following issues on Windows:* JRUBY-4703: -J-ea in native launcher is not enabling assertions* JRUBY-4709: Add trailing sep to classpath to make sure PWD is included (like jruby.sh)* JRUBY-4706: -Xnobootclasspath option should disable putting jruby.jar into bootclasspath* Disable bootclasspath in --profile and --profile-all modes.* Add -Xversion command
be134cc299d7fd25de6566a48a2eef34ffe63e59,,,Add jruby.gem.(path|home) property support for rubygems. (Take 2)Fix for JRUBY-4729.Signed-off-by: Nick Sieger <nick@nicksieger.com>
6ca0f756342bb79a113be682b7a81af71c747365,2,"JRUBY-4757, JRUBY-2621",Partial fix for too-big methods (JRUBY-2621 and JRUBY-4757): chunk 100%-literal arrays and hashes.
fe11f82bc6236dc6746a228a50d4bac6d467618e,3,JRUBY-335,"Various fixes and cleanups for loading semantics for JRUBY-335:- More correct logic for require regarding handling of extensions- Simpler, shorter load and search heuristic that minimized classloader resource lookups- Removed extensions and load paths we know aren't being used at present"
4a2ee1190e77df99271070fa05f41e7d2f90af64,2,,JRUBY-466: Additional position fixes and rewriting utilities for ASTJRUBY-145: Adding Comments to the ASTRemove getIter from various call nodesAdded more INameNodes to things with getName
8de0e90f90eb102921269447410886e31ac168a2,2,"JRUBY-633, JRUBY-634","JRUBY-633, JRUBY-634: jruby-complete fixes, plus remove vestiges ofbouncycastle from POMs"
b0d4a231c2c25e561f6bd876762e583fd32f65d1,2,"JRUBY-670, JRUBY-671",Reasonably complete fix for JRUBY-670 and JRUBY-671
4fa8a42a85516a6855f91332689bee05a6bd2380,,,"Fixes for Threading, largely for kill, raise, and critical= to make them a bit more reliable and to avoid threads fighting over raising and killing each other (like timeout.rb). JRUBY-187 I guess."
772ce0945adb840a9a80feba624639f86a812486,3,"JRUBY-788, JRUBY-310, JRUBY-309","JRUBY-788:  Implement IConv#openJRUBY-310: Implement Iconv instance methods iconv, closeJRUBY-309: Implement IConv Exception classes (e.g. Iconv::IllegalSequence and friends)Patch by Koichiro Ohba"
fbacb873b7c0bba3ab88234680659cf957b3c204,4,"JRUBY-1016, JRUBY-1017, JRUBY-1010, JRUBY-1011",JRUBY-1016: File.expand_path not handling directory starting points properlyJRUBY-1017: File.extname doesn't handle single period properlyJRUBY-1010: String#sum with negative argument causes NativeExceptionJRUBY-1011: String#sum should only accept one argument[All issues reported by Daniel Berger and patched by David Montag...Way to team up on these guys :)]
c719a6634098d783d9d6488651cb2964a3491be9,2,"JRUBY-1493, JRUBY-1399",JRUBY-1399: Reflection-based execution is totally broken (Peter Brant)JRUBY-1493: Methods do not always have the right line number in the AST (Peter Brant)
cb9ebb728678602de7ecd3e314529c30209ab7ce,2,,"JI cleanup: remove old hack/workaround for long-since-fixed JRUBY-948; provide underscore __aliases__ for methods removed from blank-slated JavaPackageModuleTemplate, to facilitate workarounds for issues like JRUBY-1086/JRUBY-1275 (IRB tab completion). All this code eventually needs to move to Java, but this should help in the interim."
1dbbe1a37a3d9cd926b906dc06b5a8578de6b3b3,2,,"More JI cleanup:- Reworked the very expensive and thread-unsafe (and essentially obsolete) proxy extender mechanism. No longer is every new proxy checked against all proxy extenders; since the Rubification of the Java class hierarchy, it's really only necessary to extend the class/module specified in the extend_proxy method. I'd like to see this feature deprecated, as it's redundant now (see forthcoming note on jruby-dev).- Moved JavaClass instances to a ConcurrentHashMap for faster access.  They had been in a weak hash map, but since almost all of them were linked to proxies that were in non-weak maps, there was really no benefit (and some performance penalties).- Used concurrent techniques to speed proxy class lookup.  Proxies are now stored with their corresponding JavaClass instances, and can be retrieved with an unsynchronized access.- Eliminated the ProxyData ""dataStruct"" that had been attached to the JavaUtilities module; most of the fields (maps) had been eliminated in the work noted above; the remaining fields have been moved to JavaSupport where they may be accessed without a JavaUtilities reference.- Permanently disabled the the old-style (<) interface implementation syntax (there had been a method to enable it; no more).- Fixed a bug wherein the colon2 syntax for opening modules was not working if the module had not previously been referenced.  Will open a JIRA and backport to the 1.0 branch.Fixes JRUBY-931 (thread-unsafe proxy extender access).Most of this work is transitional; i.e., will probably be implemented differently when JI is overhauled.  Just cleaning up and clearing away dead wood in advance of that overhaul."
d98408c632bff3989cdbf16023e6595d20a5a152,2,"JRUBY-1875, JRUBY-1876",JRUBY-1875: Integer overflow in Array#fill (patch by Vladimir Sizikov)JRUBY-1876: Array#initialize should not modify frozen array (patch by Vladimir Sizikov)
16e5550655d971eca1eeea0a2fe8794b86928b97,7,"JRUBY-1408, JRUBY-1443, JRUBY-1435, JRUBY-1416, JRUBY-1432","Lexer jumbo patch.  Speeds up general parsing 10-15%.  Cold parses are about 30% faster.   Code has been refactored to the point that additional optimizations can be considered (like bytelist identifiers for alloc-less identifiers; same for uninterpolated string nodes).intern'ing of identifiers now happen in lexer rather than being smattered through ASTReader -> InputStream for LexerSourceA new ByteList LexerSource for evalsAdditional bugs fixed:JRUBY-1408: JRuby crashes with error: can't find string ""EOF"" anywhere before EOF (SyntaxError)JRUBY-1443: Wrong position information for a CallNode with parenthesesJRUBY-1435: YieldNodes sometimes have wrong position informationJRUBY-1416: eval of a ""proc"" with setting the line number for something lower than 1 to adjust the line number causes ""java.lang.ArrayIndexOutOfBoundsException: -1 (NativeException)""JRUBY-1432: NFE from RubyYaccLexer.yylex"
017c7839059a6881fdc1e4fe510b1a102c188626,4,"JRUBY-1663, JRUBY-1664, JRUBY-1669",JRUBY-1663: IO.each_line incorrectly reads empty lines (patch by Vladimir Sizikov)JRUBY-1664: IO.read(1) after ungetc always returns nil (patch by Vladimir Sizikov)JRUBY-1669: IO.puts doesn't follow the specification (patch by Vladimir Sizikov)Above were Rubinius spec failuresRemoved extra unused processing of seperator from each_line (me)
e4b20bafd8ec5e0b80afde2804b5a254ddcb14c4,6,"JRUBY-1433, JRUBY-1438, JRUBY-1580","JRUBY-1516: FileTest#chardev? is not currently implemented.JRUBY-15: Implement File::Stat.ino and File::Stat.devJRUBY-1438: Create JNA-based implementations of fstat/lstatJRUBY-1580: Pathname#unlink complains ""<file> is not a directory""JRUBY-1433: File::Stat.uid needed for rubyzipThis patch implements more than the above.  It also implements all of File::Stat, File::Test, Kernel#test, and all File posix methods (sans File.umask and File.readlink).  This is done via JNA and will work on Linux, Windows, and MacOS (32 bits).  64 bit systems require a little more work and Windows may be spotty (e.g. not as solid and Linux/MacOS)."
5ace69d0a164de16bc4bdfb8c52369a72f6cba80,3,"JRUBY-1719, JRUBY-1721, JRUBY-1722","JRUBY-1721: String#slice and #[] on tainted string might incorrectly return untainted string (patch by Vladimir Sizikov)JRUBY-1722: String#<=> doesn't handle non-string arguments, but in MRI it does (patch by Vladimir Sizikov)JRUBY-1719: String#capitalize! handles frozen empty string incompatibly (patch by Vladimir Sizikov)"
327a5a6978ef72338212352711e6ae8117490253,3,"JRUBY-1737, JRUBY-1738, JRUBY-1742",JRUBY-1737: String#% can't handle some string arguments with underscores (patch by Vladimir Sizikov)JRUBY-1738: Kernel.sprintf with argument of some non-standard type doesn't invoke to_int on it (patch by Vladimir Sizikov)JRUBY-1742: String#% with %s and %p handles tainted status of ar (patch by Vladimir Sizikov)
378c870ea9f2395c923c9ce67e6b840fac0aab68,4,"JRUBY-1743, JRUBY-1744, JRUBY-1621","JRUBY-382: Better error output from parser (less garbage == better)JRUBY-1743: =begin and =end should not be case insensitiveJRUBY-1744: END { } in method should generate a warning and not an errorJRUBY-1621: rss/maker doesn't compile- A mixed up error between global and instance variablesMy ByteListLexerSource is now disabled, but it shall return..."
80505dd70f81bf0b1028da9d7a122f5d25c87ca3,4,"JRUBY-1818, JRUBY-1817, JRUBY-1816, JRUBY-1815","JRUBY-1818: Method and UnboundMethod inspect/to_s not quite rightJRUBY-1817: native filestat isReadable{,Real}, isWritable{,Real}, and isExecutable{,Real} have small logic errorJRUBY-1816: Native File Stat mode comparisons + filetype is borkedJRUBY-1815: FileTest#identical? is not implemented"
28a5d02dce65a83f88b826689e713afdc5fb8a46,,,"Fix for JRUBY-1955: Use weak references instead of soft for ObjectProxyCache.  This reduces the usefulness of the interim fix for JRUBY-199 et al, which will await lightweights for the real solution."
9b3a3acb8ed9b8aa0ed0e0ea9209a5eaddf5fd84,2,"JRUBY-2121, JRUBY-2127",- JRUBY-2121: Fixnum's bitwise operators fail new rubyspecs- JRUBY-2127: RubyNumeric.num2long throws wrong exception
43e8d527969008ee6fb45c358d8d8eefc999a2da,3,,"Latest RubySpecs, their new location.Updated excludes (JRUBY-2543, JRUBY-2602, JRUBY-2603).'ant spec' is 100% clean on Linux.The summary of rubyspec changes since the last time:122 files changed, 2711 insertions(+), 325 deletions(-)1.4% 1.8/core/file/stat/6.4% 1.8/core/integer/1.1% 1.8/core/io/1.9% 1.8/core/1.5% 1.8/library/abbrev/7.0% 1.8/library/net/ftp/12.2% 1.8/library/readline/history/4.4% 1.8/library/readline/8.4% 1.8/library/securerandom/4.7% 1.8/library/uri/mailto/50.2% 1.8/library/uri/"
0f7b96bf9292b808532c54408658c8f2c7d90c5b,2,"JRUBY-2202, JRUBY-2203","JRUBY-2202: IO#ungetc dosen't put the position back.JRUBY-2203: IO's seek, rewind, pos= should discard the char that waspreviously pushed back with 'ungetc'Regression tests added."
02c064ef985ef4379e5ff1677a9919ac31ccbaaa,6,,"Latest rubyspecs, latest excludes (RBX-421, JRUBY-2204, JRUBY-2277,JRUBY-2278, JRUBY-2279, JRUBY-2281).100% clear on Linux.Rubyspec changes since the last update:1.1% spec/ruby/1.8/core/array/0.9% spec/ruby/1.8/core/exception/0.2% spec/ruby/1.8/core/file/16.7% spec/ruby/1.8/core/integer/9.3% spec/ruby/1.8/core/io/shared/19.1% spec/ruby/1.8/core/io/1.9% spec/ruby/1.8/core/kernel/1.0% spec/ruby/1.8/core/string/shared/1.1% spec/ruby/1.8/core/string/4.1% spec/ruby/1.8/core/time/shared/3.0% spec/ruby/1.8/language/1.3% spec/ruby/1.8/library/matrix/shared/24.1% spec/ruby/1.8/library/matrix/9.2% spec/ruby/1.8/library/socket/udpsocket/2.2% spec/ruby/1.8/library/syslog/0.7% spec/ruby/1.8/library/yaml/3.2% spec/ruby/1.8/shared/file/43 files changed, 887 insertions(+), 185 deletions(-)"
f5b62075d4bb242625996a2153ebf636466ba8a6,3,"JRUBY-2193, JRUBY-2194, JRUBY-2195","Fixes for JRUBY-2193, JRUBY-2194, JRUBY-2195 from Damian. It passes all our tests, it passes all the specs, and it vastly improves the performance of those rubinius benchmarks. Full speed ahead!"
1d6cbee7a1ffd9ae3d0ed6fe1badee8dcbef5b36,2,"JRUBY-2270, JRUBY-2093","Fix for JRUBY-2093 and JRUBY-2270: eliminated the per-method matchingMethod cache used by InstanceMethodInvoker (and *not* used by StaticMethodInvoker), as it didn't take into account arity and would therefore sometimes return the wrong method (JRUBY-2093), was a pain to synchronize (JRUBY-2270), and added overhead while providing no benefit in the common case where there are not multiple methods with the same name and arity.  Also reworked synchronization so that only a relatively inexpensive volatile read is required for all but the first invocation of a method of a given name.Also includes a small tweak to primitive class matching to evaluate more probable (by my guesstimation) candidates first."
e38756e8914e11262b8924f16d24096855bf4ecc,3,,"New rubyspec version, new excludes(JRUBY-2391, JRUBY-2380, JRUBY-2378).Summary of spec changes since the last one:0.1% spec/ruby/1.8/core/array/fixtures/1.4% spec/ruby/1.8/core/array/shared/0.6% spec/ruby/1.8/core/array/0.3% spec/ruby/1.8/core/env/fixtures/1.5% spec/ruby/1.8/core/env/shared/7.6% spec/ruby/1.8/core/env/1.0% spec/ruby/1.8/core/file/shared/3.5% spec/ruby/1.8/core/file/stat/17.8% spec/ruby/1.8/core/file/0.8% spec/ruby/1.8/core/io/8.3% spec/ruby/1.8/core/kernel/0.5% spec/ruby/1.8/core/string/2.7% spec/ruby/1.8/core/symbol/1.1% spec/ruby/1.8/core/thread/0.5% spec/ruby/1.8/language/4.2% spec/ruby/1.8/library/bigdecimal/shared/26.0% spec/ruby/1.8/library/bigdecimal/2.4% spec/ruby/1.8/library/cgi/3.4% spec/ruby/1.8/library/complex/1.1% spec/ruby/1.8/library/matrix/scalar/6.1% spec/ruby/1.8/library/matrix/2.3% spec/ruby/1.8/library/rational/2.1% spec/ruby/1.8/library/rexml/element/2.0% spec/ruby/1.8/library/rexml/shared/0.2% spec/ruby/1.8/library/singleton/1.3% spec/ruby/1.8/library/socket/udpsocket/389 files changed, 4861 insertions(+), 710 deletions(-)"
ad26ae705086bb001e59193cf0961095eb789027,2,,"New RubySpecs version, new exclusions(JRUBY-2452).'ant spec' is 100% clean on Linux.The list of spec changes since the last one:295 files changed, 3177 insertions(+), 560 deletions(-)2.5% spec/ruby/1.8/core/file/stat/2.5% spec/ruby/1.8/core/file/4.2% spec/ruby/1.8/core/numeric/6.0% spec/ruby/1.8/core/5.4% spec/ruby/1.8/language/6.6% spec/ruby/1.8/library/bigdecimal/4.6% spec/ruby/1.8/library/cgi/cookie/9.5% spec/ruby/1.8/library/cgi/htmlextension/2.7% spec/ruby/1.8/library/cgi/queryextension/value/18.5% spec/ruby/1.8/library/cgi/queryextension/9.3% spec/ruby/1.8/library/cgi/2.6% spec/ruby/1.8/library/complex/shared/2.2% spec/ruby/1.8/library/complex/4.6% spec/ruby/1.8/library/csv/2.2% spec/ruby/1.8/library/matrix/shared/14.8% spec/ruby/1.8/library/matrix/"
c67483e0740397939bc6ae5a2a283d6d9ed85be9,3,JRUBY-2443,"Fix for JRUBY-2443, two different issues related to loading Strings fixed"
a7a787839f3233bdbc804181fdd555940a57297c,,,"Fixes for JRUBY-2267: clone frames always when constructing a binding, but don't clone on push and put backref/lastline in a separate structure so they can ""float"". Tests coming. This may also fix other backref/lastline issues."
754a94288ab40680e6c927daacadb9eb16420cbd,3,,"Huzzah! New rubyspecs are in.1. Updated the build to use standalone rubyspec and mspec repos.* For now, We use 'tar' binary to untar the tarballs, since Antcan't handle tarballs provided by GitHub.2. Updated excludes:JRUBY-2219, JRUBY-2223, JRUBY-2250, JRUBY-2525, JRUBY-2536,JRUBY-2537, JRUBY-2538, JRUBY-2539, JRUBY-2540, RUBYSPEC-8Now 100% clean on Linux:2027 files, 6977 examples, 26629 expectations, 0 failures, 0 errors3. Reorganized the dir structrue a bit:* spec - the main dir with spec-related stuff inside* spec/mspec - the mspec runner* spec/ruby - the rubyspecs* spec/tags - (SOON) tags/excludes for rubyspecs"
8da55f45fc6eac81f4ee44e407997df62e294851,,,"Last round of changes for JRUBY-1386, improve instance_eval. Added cases to the benchmark too."
3247d8603913d2aac1ed9b12f42f31fc8910cf60,,,"Updated rubyspecs, updated excludes (JRUBY-2553).Spec run is 100% clean on Linux.Changes since the last update:72 files changed, 494 insertions(+), 162 deletions(-)1.9% 1.8/core/dir/3.4% 1.8/core/enumerable/3.2% 1.8/core/env/shared/18.1% 1.8/core/env/3.7% 1.8/core/hash/shared/8.8% 1.8/core/hash/9.8% 1.8/core/numeric/3.7% 1.8/core/string/shared/3.7% 1.8/core/struct/41.6% 1.8/library/rexml/element/1.4% 1.8/"
c1b9e86280460391bdd805edcdae5b33f5c8cfb9,3,,"Updated to the latest rubyspecs. 100% clean on Linux.New excludes(JRUBY-2602, JRUBY-2626, JRUBY-2627).Changes since the last time:230 files changed, 4171 insertions(+), 1290 deletions(-)1.9% 1.8/core/array/shared/3.5% 1.8/core/array/2.6% 1.8/core/file/1.0% 1.8/core/kernel/13.5% 1.8/core/process/1.4% 1.8/core/3.5% 1.8/library/iconv/1.5% 1.8/library/net/ftp/conditionvariable/1.5% 1.8/library/readline/history/1.3% 1.8/library/rexml/attributes/shared/7.3% 1.8/library/rexml/attributes/1.5% 1.8/library/rexml/node/5.1% 1.8/library/rexml/text/1.1% 1.8/library/set/shared/3.3% 1.8/library/set/sortedset/shared/24.4% 1.8/library/set/sortedset/7.0% 1.8/library/set/1.3% 1.8/library/stringio/enumerator/2.6% 1.8/library/stringio/shared/3.0% 1.8/library/stringio/2.6% 1.8/library/syslog/4.8% 1.8/library/uri/3.1% 1.8/library/"
1f570e46aad826b961a4048cf53fbec1c2e838e7,2,,"Updated rubyspecs, new excludes (JRUBY-2553, JRUBY-2651).100% clear on Linux.The changes since the last one:111 files changed, 3091 insertions(+), 617 deletions(-)1.6% 1.8/core/kernel/fixtures/2.1% 1.8/library/mathn/integer/3.3% 1.8/library/mathn/math/shared/1.4% 1.8/library/mathn/math/2.1% 1.8/library/mathn/prime/14.4% 1.8/library/mathn/rational/3.3% 1.8/library/rational/14.7% 1.8/library/rexml/attribute/1.0% 1.8/library/rexml/cdata/shared/2.2% 1.8/library/rexml/cdata/1.1% 1.8/library/rexml/node/2.7% 1.8/library/set/sortedset/2.4% 1.8/library/stringio/enumerator/15.8% 1.8/library/stringio/shared/29.1% 1.8/library/stringio/1.5% 1.8/library/"
26f1a6c3157792b442c9ce198242c69c91eb0b80,7,,"Updated mspec/rubyspecs to the latest versions.* Note: mspec command line params have been changed (no more -X option).* Updated default.mspec* New excludes: JRUBY-2147, JRUBY-2553, JRUBY-2672, JRUBY-2683,JRUBY-2737, JRUBY-2739, JRUBY-2740.* 100% clear on Linux.* The changes since the last time:455 files changed, 7865 insertions(+), 2288 deletions(-)8.3% 1.8/core/array/6.0% 1.8/core/20.0% 1.8/library/net/http/7.0% 1.8/library/socket/socket/13.0% 1.8/library/socket/13.0% 1.8/library/stringio/5.9% 1.8/library/stringscanner/26.1% 1.8/library/"
79d82f67110eb658f411b1fb67c815853b08bc7e,10,,"New mspec/rubyspecs. New excludes: JRUBY-2543,JRUBY-2758, JRUBY-2760, JRUBY-2826, JRUBY-2834,JRUBY-2836, JRUBY-2837, JRUBY-2838, JRUBY-2839JRUBY-2840.RubySpecs 100% pass now on Linux.Changes since the last time:840 files changed, 12070 insertions(+), 8874 deletions(-)8.6% 1.8/core/argf/5.0% 1.8/core/array/shared/6.5% 1.8/core/string/shared/25.6% 1.8/core/5.0% 1.8/library/bigdecimal/6.8% 1.8/library/complex/math/shared/5.9% 1.8/library/logger/31.5% 1.8/library/"
7759e8f7419f52c13a74f6806a5aa2b4477d11c0,2,,"JRUBY-2879: 'net/ftp' breaks when 'mathn' is also loaded.* Applied the fix from MRI (ruby_1_8_6@17998,  [ruby-core:17557]* This fixes *lots* of RubySpec failures."
5e4668b3ea6a47dfd83de4201f79401dc8509c0a,,,"Enhancement for JRUBY-231, allow implementing JavaBean-like interfaces with attr* methods.Actually this commit includes logic to allow get/set methods to be implemented with their property names, boolean properties to be implemented with their question-marked versions, and other boolean methods to be implemented with their question-marked versions, all either Java-case or Ruby-case. Whether this full set of features will remain through 1.1.4 is unknown, but it's there for the moment."
18d03923f1c4645a03cfedf14e9786c300ef42c7,2,"JRUBY-2680, JRUBY-2803","Likely fix for JRUBY-2680 and potential fix for JRUBY-2803, by porting the entirety of JavaInterfaceTemplate from Ruby to Java. The bulk of this module was the append_features logic, which was gigantic, involved multiple instance_evals, many method definitions, and a lot of back-and-forth to the Java side of things. Writing up some benchmarks momentarily."
74deae83536b0efcbf299a4e57002769a16c3a61,,,"Fix for JRUBY-3049: EXCEPTION_ACCESS_VIOLATIONThis commit has several changes to simplify jump exception handling in while loops:* The ""reason"" for LocalJumpError is now based on an enum, so there's no need to .equals a string* Redo handling is now a separate try/catch chunk contained within the loop, rather than part of the larger chunk outside it. This prevents the redo from jumping back into the exception-handling logic, which was the source of the crashing.* LocalJumpError handling within a while loop is now implemented as a RuntimeHelpers call that checks for redo|break|next and *rethrows* a normal JumpException subtype. This allows the jump-handling logic to be reused, and moves the LJE-juggling to a separate piece of code.Not only does this solve the segfault, it also substantially reduces the amount of code emitted for a jumpexception-aware while loop."
df7caff252cf10edd9857f934a580947880803a2,2,"JRUBY-2945, JRUBY-2948","Fix for JRUBY-2948: Exceptions do not cut off at binding evals after change reported in JRUBY-2945This problem arose because I had nowhere to stick the ""binding frame"" flag on StackTraceElement, and so had to disable the trace-shortening logic that cuts off backtraces at a binding/eval frame. My fix was to create a new type RubyStackTraceElement that wraps StackTraceElement and includes a field for ""binding frame"", allowing me to reenable the cutoff logic. Traces in e.g irb look fine now (clean, short), and I don't think I added back a whole lot of overhead.Stacktraces are still a nasty bit of code that needs to be revisited and replaced some day. Some day."
b6feb3e09e8da2cbb74f3fe6a7f1a788660edc5f,5,,"Spec updates!* There are no 1.8/1.9 separate specs now, so I moved tags and updated configurations for the new layout* New tags for bugs JRUBY-2826, JRUBY-3274, JRUBY-3275, and JRUBY-3276* Fix for constant scoping bug JRUBY-3277 exposed by new constant specs"
2571d5d5b450985d5105c613008c9b6517edabca,2,JRUBY-3806,Fix for JRUBY-3806: Encoding problems with File.expand_path after JRUBY-3576 fix for Macroman issueTest by Charles Oliver NutterFix by Daniel Hahn: Modification for expand_path unicode (test)Signed-off-by: Charles Oliver Nutter <headius@headius.com>
3487bba2fada506a4c56b7e643e82ae3b6294cb5,2,"JRUBY-4116, JRUBY-3950",Fixed JRUBY-4116 and JRUBY-3950 (IRB in Applet and WebStart environments).- JRUBY-4116: security error running org.jruby.demo.IRBConsole in jruby-complete- JRUBY-3950: samples/irb-applet.html doesn't load the Applet
6b99148e78b587cad2b7ebbb37c3457ed4809a9e,2,"JRUBY-4366, JRUBY-4367",Update Windows JRuby launcher to version 0.9.1.This fixes the following:- JRUBY-4366: [windows] Native launcher fails tests when JDK is started out-of-process- JRUBY-4367: [windows] Native launcher ignores wrong JVM options- Launcher size reduced by 60kb (from original 340kb)
eff9df5bcda09edbdc533638d6477d571db8d748,3,,"Switched to the latest Rubyspecs.- Excluded Module#module_function spec (JRUBY-4214).- Excluded Integer#prime_division spec (JRUBY-4243).- Bigdecimal exclusions (JRUBY-4242).- Excluded some proc specs due to evil JRUBY-4180.- Corrected the tags for changed spec descriptions for Array#hash.- Enable Array#pack specs.Here's the spec's diffstat:59 files changed, 617 insertions(+), 284 deletions(-)27.3% core/array/14.0% core/enumerator/4.8% core/kernel/8.9% library/bigdecimal/shared/25.9% library/bigdecimal/9.5% library/readline/5.5% library/socket/socket/"
782583fc38b63f507400339563c662576201fbbb,3,"JRUBY-4377, JRUBY-4381","Upgraded Windows Native Launcher to version 0.9.2.This fixes the following:- JRUBY-4375: Provide nice icons for jruby.exe and jrubyw.exe(the icons are currently stubs, waiting for proper ones)- JRUBY-4377: Native launcher handles -J-cp and -J-classpath options incorrectly- JRUBY-4381: Native launcher complains about --client and --server options"
dd7ad183d7c93a98d3b4a50d7862d6144b536af4,7,JRUBY-4666,Multiple improvements to inner class support and other JI tweaks:* Unify inner class logic for interfaces and classes* Make it possible to access lower-case inner classes with a method (:: or .) (JRUBY-4666)* Make it possible to import inner classes as their simple name* Provide a better error for lower-case class name imports* Improve arity error on package/class elements in dotted syntax* Clean up java_import logic* Make include_class call java_import instead of vice-versa
9414a764ecf84b9c0f2871dabaf51b2036fc1b47,2,"JRUBY-2186, JRUBY-4693","Better fix for JRUBY-2186 and improvement to prevent things like JRUBY-4693.JRUBY-2186 added logic to filter out singleton classes in completeion.rb. This commit just filters them during each_object, like MRI does.JRUBY-4693 reported a perf issue with Float multiplication that turned out to be just running a benchmark in IRB. We originally turned ObjectSpace on in IRB to allow completion to work, but completion only uses each_object(Module). This commit makes that work as well as each_object(Class) did."
1b919d492bd5cf2132383d291369c14972f47f63,2,JRUBY-4737,"Fixes (and more) for JRUBY-4737: Compatibility issue with Spring property from 1.4.0 to 1.5.0.RC1It appears that JRuby 1.4.0 allowed various objects to coerce to ""void"" by returning null, so this commit fixes that.In addition, I've tried to unify some of the toJava logic, making most implementations call super.toJava if they can't coerce to the requested type (allowing RubyBasicObject's implementation to try some other avenues or error out). I also added some additional coersion cases for Time to java.util.Calendar, java.sql.Date/Time/TimeStamp, and joda's DateTime (it already did java.util.Date)."
54485aaa13e09535099fbf1107972f368bd97ed0,2,,Fixes for the fixes for JRUBY-3742: Java native threads are not added to ThreadService.rubyThreadMap after being adopted.* Make the weak RubyThreadMap actually use the reference queue (doh!)* Revert the threadContextMap to a weak map (doh!)